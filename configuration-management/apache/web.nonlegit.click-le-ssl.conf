<VirtualHost *:80>
        ServerName web.nonlegit.click
        Redirect permanent / https://web.nonlegit.click/ 
</VirtualHost>

<IfModule mod_ssl.c>
<VirtualHost *:443>
        ServerName web.nonlegit.click

        RewriteEngine on
        RewriteCond %{HTTP:UPGRADE} websocket [NC]
        RewriteCond %{HTTP:CONNECTION} upgrade  [NC]
        RewriteRule .* "ws://10.0.1.4:443%{REQUEST_URI}" [P,L]

        ProxyPreserveHost on
        ProxyPass       /       http://10.0.1.4:443/
        ProxyPassReverse /      http://10.0.1.4:443/

SSLCertificateFile /etc/letsencrypt/live/api.nonlegit.click/fullchain.pem
SSLCertificateKeyFile /etc/letsencrypt/live/api.nonlegit.click/privkey.pem
Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>
